if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}function a(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}function n(){return`周${["日","一","二","三","四","五","六"][(new Date).getDay()]}`}function l(){const e=new Date;return`${e.getMonth()+1}月${e.getDate()}日`}const o=()=>new Promise(((e,a)=>{uni.request({url:"http://ehall.cqupt.edu.cn/publicapp/sys/xbxzbghytjdcx/modules/pcdjk/hqhyxxxx.do?RQ=2024-09-03",method:"POST",data:{pageSize:"10",pageNumber:"1"},success(t){200===t.statusCode&&"0"===t.data.code&&e(t.data),a("获取会议信息出错")},fail(e){a(e),t("log","at request/getHYinfo.js:26","获取会议详细信息错误")}})}));function i(e){const t=["","十","百","千","万","十万","百万","千万","亿"],a=["零","一","二","三","四","五","六","七","八","九"];if(e<0)return"索引不能为负数";if(e<10)return a[e];let n="",l=0;for(;e>0;){const o=e%10;o>0?n=a[o]+t[l]+n:n&&"零"!==n[0]&&(n="零"+n),e=Math.floor(e/10),l++}return n||""}__definePage("pages/index/index",((e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a})(e.defineComponent({__name:"index",setup(r){const s=e.ref({}),c=setInterval(u,18e5);function u(){uni.request({url:"https://api.seniverse.com/v3/weather/now.json?key=Sf1hBVAVv6f_0GVjz&location=chongqing&language=zh-Hans&unit=c",method:"GET",success:e=>{s.value=e.data.results[0].now}})}const v=e.ref(a()),d=e.ref(n()),p=e.ref(l()),m=e.ref({WID:"",HYMC:"",HYKSSJ:"",HYDD:"",ZCR:""}),g=e.ref([{YTMC:"",HBDW_DISPLAY:"",ZT_DISPLAY:"",ZT:"",HHRY:""}]),y=e.ref(0),h=e.ref(!0);const f=/(\d{1,2}):(\d{2}):(\d{2})/;Array.prototype.findLastIndex=function(e){for(let t=this.length-1;t>=0;t--)if(e(this[t],t,this))return t;return-1};const D=e=>`content-main-info-ZT ZT-${e}`,x=()=>{new Promise(((e,t)=>{uni.request({url:"http://ehall.cqupt.edu.cn/publicapp/sys/xbxzbghytjdcx/modules/pcdjk/hqytxxxx.do?RQ=2024-09-03",method:"POST",data:{pageSize:"10",pageNumber:"1"},success(a){200===a.statusCode&&"0"===a.data.code&&e(a.data),t("获取议题信息出错")},fail(e){t(e)}})})).then((e=>{g.value=e.datas.hqytxxxx.rows.filter((e=>e.HYID===m.value.WID)),y.value=Math.max(g.value.findIndex((e=>"3"==e.ZT)),Math.max(g.value.findLastIndex((e=>"4"==e.ZT)),0)),y.value=Math.max(0,Math.min(y.value,g.value.length-3)),g.value.lenth>2&&setTimeout((()=>{t("log","at pages/index/index.vue:192","roll"),y.value+=1}),7500)})).catch((e=>{t("log","at pages/index/index.vue:198",e)}))},w=()=>{h.value&&(t("log","at pages/index/index.vue:204","polling"),setTimeout((()=>{o().then((e=>{const{HYMC:t,HYKSSJ:a,HYDD:n,ZCR:l,WID:o}=e.datas.hqhyxxxx.rows[0],i=a.match(f);m.value.HYMC=t,m.value.HYDD=n,m.value.HYKSSJ=`${i[1]}:${i[2]}:${i[3]}`,m.value.ZCR=l,m.value.WID=o,x(),w()})).catch((e=>{t("log","at pages/index/index.vue:219",e)}))}),15e3))};e.onMounted((()=>{o().then((e=>{const{HYMC:t,HYKSSJ:a,HYDD:n,ZCR:l,WID:o}=e.datas.hqhyxxxx.rows[0],i=a.match(f);m.value.HYMC=t,m.value.HYDD=n,m.value.HYKSSJ=`${i[1]}:${i[2]}:${i[3]}`,m.value.ZCR=l,m.value.WID=o,x(),w()})).catch((e=>{t("log","at pages/index/index.vue:242",e)}))})),e.onMounted((()=>{u()}));let S=setInterval((()=>{v.value=a(),p.value=l(),d.value=n()}),1e3);return e.onUnmounted((()=>{t("log","at pages/index/index.vue:257","清除"),h.value=!1,clearInterval(S),clearInterval(c)})),(t,a)=>{var n,l,o,r,c,u,h,f,x;return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("image",{src:"/static/bg2.png",mode:""}),e.createElementVNode("view",{class:"HYinfo"},[e.createElementVNode("view",{class:"HYMC"},e.toDisplayString(m.value.HYMC),1),e.createElementVNode("view",{class:"HYDD-HYSJ"},[e.createElementVNode("view",{class:"HYDD"},e.toDisplayString(m.value.HYDD),1),e.createElementVNode("view",{style:{"margin-top":"2rpx"}},e.toDisplayString(m.value.HYKSSJ),1)]),e.createElementVNode("view",{class:"bottom"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(m.value.ZCR?"主持人：":"")+e.toDisplayString(m.value.ZCR),1),e.createElementVNode("view",{class:"ZW"})])]),e.createElementVNode("view",{class:"content-right"},[e.createElementVNode("view",{class:"content-right-header"},[e.createElementVNode("view",{class:"tempretrue"},e.toDisplayString(s.value.temperature)+"° ",1),e.createElementVNode("view",{class:"city"},"Chongqing"),e.createElementVNode("view",{class:"time"},[e.createElementVNode("view",{class:"timecolock"},e.toDisplayString(v.value),1),e.createElementVNode("view",{class:"timebottom"},e.toDisplayString(d.value)+" "+e.toDisplayString(p.value),1)])]),e.createElementVNode("view",{class:"content-main"},[e.createElementVNode("view",{class:"content-main-header",style:{"text-align":"center","font-size":"23rpx"}}," 会议议程 "),e.createElementVNode("view",{class:"content-main-info1"},[e.createElementVNode("view",{class:"box left"},[e.createElementVNode("image",{src:"/static/bgn.png",mode:"",class:"img1"})]),e.createElementVNode("view",{class:"box right"},[e.createElementVNode("view",{class:"content-main-info-name"},"议题"+e.toDisplayString(e.unref(i)(null==(n=g.value[y.value])?void 0:n.PX)),1),e.createElementVNode("view",{class:e.normalizeClass(D(g.value[y.value].ZT))},e.toDisplayString(g.value[y.value].ZT_DISPLAY?`【${null==(l=g.value[y.value])?void 0:l.ZT_DISPLAY}】`:""),3)])]),e.createElementVNode("view",{class:"HBDW-HBR"},[e.createElementVNode("view",{class:"HBDW"},e.toDisplayString(g.value[y.value].HBDW_DISPLAY?`汇报单位：${g.value[y.value].HBDW_DISPLAY}`:""),1),e.createElementVNode("view",{class:"HBR"},e.toDisplayString((null==(o=g.value[y.value])?void 0:o.HHRY)?`汇报人：${null==(r=g.value[y.value])?void 0:r.HHRY}`:""),1)]),e.withDirectives(e.createElementVNode("view",{class:"content-main-info2",style:{"margin-top":"7rpx"}},[e.createElementVNode("view",{class:"box left"},[e.createElementVNode("image",{src:"/static/bun.png",mode:"",class:"img2"})]),e.createElementVNode("view",{class:"box right"},[e.createElementVNode("view",{class:"content-main-info-name"},"议题"+e.toDisplayString(e.unref(i)(null==(c=g.value[y.value+1])?void 0:c.PX)),1),e.createElementVNode("view",{class:e.normalizeClass(D(null==(u=g.value[y.value+1])?void 0:u.ZT))},"【"+e.toDisplayString(null==(h=g.value[y.value+1])?void 0:h.ZT_DISPLAY)+"】",3),e.createElementVNode("image",{src:"/static/yn.png",style:{height:"56rpx",position:"absolute",top:"-2rpx"}})])],512),[[e.vShow,g.value[y.value+1]]]),e.withDirectives(e.createElementVNode("view",{class:"HBDW-HBR",style:{"margin-top":"10rpx"}},[e.createElementVNode("view",{class:"HBDW"},"汇报单位："+e.toDisplayString(null==(f=g.value[y.value+1])?void 0:f.HBDW_DISPLAY),1),e.createElementVNode("view",{class:"HBR"},"汇报人："+e.toDisplayString(null==(x=g.value[y.value+1])?void 0:x.HHRY),1)],512),[[e.vShow,g.value[y.value+1]]]),e.createElementVNode("view",{class:"rt"}," 重庆邮电大学信息中心，蓝山工作室开发 ")])])])])}}}),[["__scopeId","data-v-cab1f94c"]]));const r={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}};const{app:s,Vuex:c,Pinia:u}={app:e.createVueApp(r)};uni.Vuex=c,uni.Pinia=u,s.provide("__globalStyles",__uniConfig.styles),s._component.mpType="app",s._component.render=()=>{},s.mount("#app")}(Vue);
