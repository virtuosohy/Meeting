if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}const a="/static/yn.png";function n(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}function l(){return`周${["日","一","二","三","四","五","六"][(new Date).getDay()]}`}function o(){const e=new Date;return`${e.getMonth()+1}月${e.getDate()}日`}function i(){const e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return`${t}-${a<10?`0${a}`:a}-${n<10?`0${n}`:n}`}const r=()=>new Promise(((e,a)=>{uni.request({url:`http://ehall.cqupt.edu.cn/publicapp/sys/xbxzbghytjdcx/modules/pcdjk/hqhyxxxx.do?RQ=${i()}`,method:"POST",data:{pageSize:"10",pageNumber:"1"},success(t){200===t.statusCode&&"0"===t.data.code&&e(t.data),a("获取会议信息出错")},fail(e){a(e),t("log","at request/getHYinfo.js:26","获取会议详细信息错误")}})}));function s(e){const t=["","十","百","千","万","十万","百万","千万","亿"],a=["零","一","二","三","四","五","六","七","八","九"];if(e<0)return"索引不能为负数";if(e<10)return a[e];let n="",l=0;for(;e>0;){const o=e%10;o>0?n=a[o]+t[l]+n:n&&"零"!==n[0]&&(n="零"+n),e=Math.floor(e/10),l++}return n||""}__definePage("pages/index/index",((e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a})(e.defineComponent({__name:"index",setup(u){const c=e.ref({}),v=setInterval(d,18e5);function d(){uni.request({url:"https://api.seniverse.com/v3/weather/now.json?key=Sf1hBVAVv6f_0GVjz&location=chongqing&language=zh-Hans&unit=c",method:"GET",success:e=>{c.value=e.data.results[0].now}})}const p=e.ref(n()),m=e.ref(l()),g=e.ref(o()),h=e.ref({WID:"",HYMC:"",HYKSSJ:"",HYDD:"",ZCR:""}),y=e.ref([{YTMC:"",HBDW_DISPLAY:"",ZT_DISPLAY:"",ZT:"",HHRY:""}]),D=e.ref(0),f=e.ref(!0);const x=/(\d{1,2}):(\d{2}):(\d{2})/;Array.prototype.findLastIndex=function(e){for(let t=this.length-1;t>=0;t--)if(e(this[t],t,this))return t;return-1};const w=e=>`content-main-info-ZT ZT-${e}`,S=()=>{new Promise(((e,t)=>{uni.request({url:`http://ehall.cqupt.edu.cn/publicapp/sys/xbxzbghytjdcx/modules/pcdjk/hqytxxxx.do?RQ=${i()}`,method:"POST",data:{pageSize:"10",pageNumber:"1"},success(a){200===a.statusCode&&"0"===a.data.code&&e(a.data),t("获取议题信息出错")},fail(e){t(e)}})})).then((e=>{y.value=e.datas.hqytxxxx.rows.filter((e=>e.HYID===h.value.WID)),D.value=Math.max(y.value.findIndex((e=>"3"==e.ZT)),Math.max(y.value.findLastIndex((e=>"4"==e.ZT)),0)),D.value=Math.max(0,Math.min(D.value,y.value.length-3)),y.value.lenth>2&&setTimeout((()=>{t("log","at pages/index/index.vue:221","roll"),D.value+=1}),7500)})).catch((e=>{t("log","at pages/index/index.vue:227",e)}))},H=()=>{f.value&&(t("log","at pages/index/index.vue:233","polling"),setTimeout((()=>{r().then((e=>{const{HYMC:t,HYKSSJ:a,HYDD:n,ZCR:l,WID:o}=e.datas.hqhyxxxx.rows[0],i=a.match(x);h.value.HYMC=t,h.value.HYDD=n,h.value.HYKSSJ=`${i[1]}:${i[2]}:${i[3]}`,h.value.ZCR=l,h.value.WID=o,S(),H()})).catch((e=>{t("log","at pages/index/index.vue:248",e)}))}),15e3))};e.onMounted((()=>{r().then((e=>{const{HYMC:t,HYKSSJ:a,HYDD:n,ZCR:l,WID:o}=e.datas.hqhyxxxx.rows[0],i=a.match(x);h.value.HYMC=t,h.value.HYDD=n,h.value.HYKSSJ=`${i[1]}:${i[2]}:${i[3]}`,h.value.ZCR=l,h.value.WID=o,S(),H()})).catch((e=>{t("log","at pages/index/index.vue:271",e)}))})),e.onMounted((()=>{d()}));let V=setInterval((()=>{p.value=n(),g.value=o(),m.value=l()}),1e3);return e.onUnmounted((()=>{t("log","at pages/index/index.vue:286","清除"),f.value=!1,clearInterval(V),clearInterval(v)})),(t,n)=>{var l,o,i,r,u,v,d,f,x,S,H,V;return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("image",{src:"/static/bg2.png",mode:""}),e.createElementVNode("view",{class:"HYinfo"},[e.createElementVNode("view",{class:"HYMC"},e.toDisplayString(h.value.HYMC),1),e.createElementVNode("view",{class:"HYDD-HYSJ"},[e.createElementVNode("view",{class:"HYDD"},e.toDisplayString(h.value.HYDD),1),e.createElementVNode("view",{style:{"margin-top":"2rpx"}},e.toDisplayString(h.value.HYKSSJ),1)]),e.createElementVNode("view",{class:"bottom"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(h.value.ZCR?"主持人：":"")+e.toDisplayString(h.value.ZCR),1),e.createElementVNode("view",{class:"ZW"})])]),e.createElementVNode("view",{class:"content-right"},[e.createElementVNode("view",{class:"content-right-header"},[e.createElementVNode("view",{class:"tempretrue"},e.toDisplayString(c.value.temperature?`${c.value.temperature}°`:""),1),e.createElementVNode("view",{class:"city"},"Chongqing"),e.createElementVNode("view",{class:"time"},[e.createElementVNode("view",{class:"timecolock"},e.toDisplayString(p.value),1),e.createElementVNode("view",{class:"timebottom"},e.toDisplayString(m.value)+" "+e.toDisplayString(g.value),1)])]),e.createElementVNode("view",{class:"content-main"},[e.createElementVNode("view",{class:"content-main-header",style:{"text-align":"center","font-size":"23rpx"}}," 会议议程 "),e.createElementVNode("view",{class:"content-main-info1"},[e.createElementVNode("view",{class:"box left"},[e.createElementVNode("image",{src:3==y.value[D.value].ZT?"../../static/bun.png":"../../static/bgn.png",mode:"",class:"img1"},null,8,["src"])]),e.createElementVNode("view",{class:"box right"},[e.createElementVNode("view",{class:"content-main-info-name"},e.toDisplayString(""===e.unref(s)(null==(l=y.value[D.value])?void 0:l.PX)?"":`议题${e.unref(s)(null==(o=y.value[D.value])?void 0:o.PX)}`),1),e.createElementVNode("view",{class:e.normalizeClass(w(y.value[D.value].ZT))},e.toDisplayString(y.value[D.value].ZT_DISPLAY?`【${null==(i=y.value[D.value])?void 0:i.ZT_DISPLAY}】`:""),3),e.withDirectives(e.createElementVNode("image",{src:a,style:{height:"56rpx",position:"absolute",top:"4rpx"}},null,512),[[e.vShow,3==y.value[D.value].ZT]])])]),e.createElementVNode("view",{class:"HBDW-HBR"},[e.createElementVNode("view",{class:"HBDW"},e.toDisplayString(y.value[D.value].HBDW_DISPLAY?`汇报单位：${y.value[D.value].HBDW_DISPLAY}`:""),1),e.createElementVNode("view",{class:"HBR"},e.toDisplayString((null==(r=y.value[D.value])?void 0:r.HHRY)?`汇报人：${null==(u=y.value[D.value])?void 0:u.HHRY}`:""),1)]),e.withDirectives(e.createElementVNode("view",{class:"content-main-info2",style:{"margin-top":"7rpx"}},[e.createElementVNode("view",{class:"box left"},[e.createElementVNode("image",{src:3==(null==(v=y.value[D.value+1])?void 0:v.ZT)?"../../static/bun.png":"../../static/bgn.png",mode:"",class:"img2"},null,8,["src"])]),e.createElementVNode("view",{class:"box right"},[e.createElementVNode("view",{class:"content-main-info-name"},"议题"+e.toDisplayString(e.unref(s)(null==(d=y.value[D.value+1])?void 0:d.PX)),1),e.createElementVNode("view",{class:e.normalizeClass(w(null==(f=y.value[D.value+1])?void 0:f.ZT))},"【"+e.toDisplayString(null==(x=y.value[D.value+1])?void 0:x.ZT_DISPLAY)+"】",3),e.withDirectives(e.createElementVNode("image",{src:a,style:{height:"56rpx",position:"absolute",top:"-2rpx"}},null,512),[[e.vShow,3==(null==(S=y.value[D.value+1])?void 0:S.ZT)]])])],512),[[e.vShow,y.value[D.value+1]]]),e.withDirectives(e.createElementVNode("view",{class:"HBDW-HBR",style:{"margin-top":"10rpx"}},[e.createElementVNode("view",{class:"HBDW"},"汇报单位："+e.toDisplayString(null==(H=y.value[D.value+1])?void 0:H.HBDW_DISPLAY),1),e.createElementVNode("view",{class:"HBR"},"汇报人："+e.toDisplayString(null==(V=y.value[D.value+1])?void 0:V.HHRY),1)],512),[[e.vShow,y.value[D.value+1]]]),e.createElementVNode("view",{class:"rt"}," 重庆邮电大学信息中心（62461295）蓝山工作室开发 ")])])])])}}}),[["__scopeId","data-v-c3106449"]]));const u={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}};const{app:c,Vuex:v,Pinia:d}={app:e.createVueApp(u)};uni.Vuex=v,uni.Pinia=d,c.provide("__globalStyles",__uniConfig.styles),c._component.mpType="app",c._component.render=()=>{},c.mount("#app")}(Vue);
